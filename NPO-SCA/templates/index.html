{% extends "base.html" %}

{% block title %}E.C.H.O.E — Empathy Connection Hope Outreach Empowerment{% endblock %}

{% block styles %}
<style>
    /* Homepage-specific styles */
    main {
        padding: 0; /* Remove default padding for homepage */
    }
    
        .hero {
            padding: 80px 0 60px;
            position: relative;
            overflow: hidden;
            background: rgba(255,255,255,0.75);
            border-radius: 20px;
            backdrop-filter: blur(4px);
            margin: 30px auto;
        }
        
        .hero .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .hero-content {
            max-width: 550px;
            z-index: 2;
        }
        
        .hero-content h1 {
            color: var(--deep-indigo);
            font-size: 3.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .hero .quote {
            font-style: italic;
            font-size: 1.2rem;
            color: var(--deep-indigo);
            opacity: 0.9;
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 3px solid var(--soft-yellow);
        }
        
        .hero .mission {
            font-size: 1.3rem;
            margin-bottom: 35px;
            color: var(--deep-indigo);
            line-height: 1.6;
        }
        
        .hero-image {
            width: 40%;
            max-width: 420px;
            z-index: 1;
        }
        
        .hero-image img {
            width: 100%;
            height: auto;
            filter: drop-shadow(0 5px 15px rgba(42, 61, 102, 0.15));
        }
        
        
    
    /* Healing Transition Styles */
    .healing-transition {
        position: relative;
        height: 200px;
        width: 100%;
        overflow: hidden;
        background: linear-gradient(
            180deg,
            rgba(232, 241, 255, 0.8) 0%,
            rgba(240, 233, 255, 0.8) 100%
        );
    }
    
    .grass-layer {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 70px;
        background: linear-gradient(
            180deg,
            rgba(168, 216, 157, 0.9) 0%,
            rgba(127, 176, 114, 0.9) 100%
        );
        border-radius: 50% 50% 0 0;
        transform: scaleX(1.2);
    }
    
    .garden-elements {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: radial-gradient(
            circle at 50% 100%,
            rgba(255, 255, 255, 0.3) 0%,
            transparent 70%
        );
    }
    
    .flowers-front {
        position: absolute;
        bottom: 5px;
        width: 100%;
        display: flex;
        justify-content: space-around;
        z-index: 3;
    }
    
    .flowers-middle {
        position: absolute;
        bottom: 15px;
        width: 100%;
        display: flex;
        justify-content: space-evenly;
        z-index: 2;
    }
    
    .flowers-back {
        position: absolute;
        bottom: 25px;
        width: 100%;
        display: flex;
        justify-content: space-around;
        z-index: 1;
    }
    
    .flower {
        font-size: 28px;
        opacity: 0.95;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }
    
    .flower-small { font-size: 22px; }
    .flower-medium { font-size: 28px; }
    .flower-large { font-size: 34px; }
    
    .garden-details {
        position: absolute;
        bottom: 10px;
        width: 100%;
        display: flex;
        justify-content: space-between;
        padding: 0 5%;
        z-index: 2;
    }
    
    .garden-detail {
        font-size: 22px;
        opacity: 0.9;
    }
    
    /* Removed emoji animations; we'll render a static meadow strip */
    .cats-container { display: none; }
    
    .butterflies {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
    }
    
    .butterfly {
        position: absolute;
        font-size: 22px;
        opacity: 0.9;
        filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1));
    }
    
    @keyframes butterflyPath1 {
        0% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30vw, -30px) rotate(10deg); }
        66% { transform: translate(60vw, -15px) rotate(-10deg); }
        100% { transform: translate(100vw, -25px) rotate(0deg); }
    }
    
    @keyframes butterflyPath2 {
        0% { transform: translate(100vw, 0) rotate(0deg); }
        33% { transform: translate(60vw, -25px) rotate(-10deg); }
        66% { transform: translate(30vw, -15px) rotate(10deg); }
        100% { transform: translate(0, -20px) rotate(0deg); }
    }
    
    .light-rays {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 50% 0%,
            rgba(255, 255, 255, 0.8) 0%,
            rgba(255, 255, 255, 0.4) 25%,
            transparent 60%
        );
        animation: glowPulse 8s ease-in-out infinite;
    }
    
    @keyframes glowPulse {
        0%, 100% {
            opacity: 0.5;
            transform: scale(1);
        }
        50% {
            opacity: 0.7;
            transform: scale(1.05);
        }
    }
        
        /* (Old how-it-works removed) */
        
        /* About / Consultant / Instagram (manual) Sections */
        .about-section,
        .consultant-section,
        .social-manual {
            padding: 70px 0;
        }

        .about-section {
            background: linear-gradient(180deg, rgba(159,197,203,0.15) 0%, rgba(173,203,164,0.12) 100%);
            text-align: left;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1.4fr 1fr;
            gap: 40px;
            align-items: center;
        }

        .about-card {
            background: rgba(255,255,255,0.9);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(42,61,102,0.12);
        }

        .consultant-section {
            background: rgba(255,255,255,0.75);
        }

        .consultant-card {
            display: grid;
            grid-template-columns: 96px 1fr;
            gap: 24px;
            align-items: center;
            background: rgba(255,255,255,0.92);
            border-radius: 16px;
            padding: 24px 28px;
            box-shadow: 0 10px 30px rgba(42,61,102,0.12);
        }

        .avatar {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gentle-lavender), var(--soft-yellow));
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0f2233;
            font-weight: 800;
            font-size: 1.4rem;
        }

        .social-manual {
            background: linear-gradient(180deg, rgba(179,156,208,0.18) 0%, rgba(159,197,203,0.18) 100%);
            text-align: center;
        }
        
        .post-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .post-card {
            background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.7));
            border: 1px solid rgba(159,197,203,0.35);
            border-radius: 12px;
            overflow: hidden;
            padding: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: stretch;
        }
        .post-card a { color: var(--deep-indigo); text-decoration: none; font-weight: 700; }

        /* Uniform square grid for IG gallery thumbnails - fill full width */
        .ig-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            width: 100%;
        }
        .ig-gallery .ig-item {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1; /* force squares */
            overflow: hidden;
            border-radius: 8px;
            background: linear-gradient(180deg, rgba(159,197,203,0.12), rgba(248,210,156,0.12));
            box-shadow: 0 6px 16px rgba(42,61,102,0.08);
        }
        .ig-gallery .ig-item img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* crop to square without distortion */
        }

        /* Scroll container so users can scroll within the gallery card */
        #igGalleryScroll {
            /* Fill the card height so the grid starts at the top */
            height: 100%;
            max-height: none;
            overflow-y: auto;
            padding: 8px;
            overscroll-behavior: contain; /* keep page from scrolling when inside */
            min-height: 0; /* allow flex child to shrink and enable scroll */
        }
        /* Ensure the IG gallery card top-aligns content and allows the scroller to expand */
        #igGalleryCard {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
    
    /* Footer styles for homepage */
        footer {
        margin-top: 0; /* Remove top margin for homepage */
        }
        
        .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 40px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 2px;
            background-color: var(--soft-yellow);
            bottom: 0;
            left: 0;
        }
        
        .tagline {
            font-style: italic;
            margin-bottom: 1rem;
            color: var(--soft-yellow);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
        .hero .container {
                flex-direction: column;
            text-align: center;
        }
        
        .hero-content {
            max-width: none;
            margin-bottom: 2rem;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .hero .quote, .hero .mission {
                font-size: 1.1rem;
            }
            
        .hero-image {
            width: 80%;
                max-width: 400px;
            }
            
        .step-card, .card, .testimonial {
            width: 100%;
            max-width: 400px;
            }
        }
    </style>
{% endblock %}

{% block content %}
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Welcome to E.C.H.O.E</h1>
                    <p class="quote">Every voice deserves to be echoed.</p>
                    <p class="mission">Here, we amplify unseen voices through anonymous letters, compassionate peer replies, and inclusive events — so no one feels alone.</p>
                    <a href="{{ url_for('submit') }}" class="btn-primary">Share Your Story</a>
                </div>
                <div class="hero-image">
                    <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="E.C.H.O.E" style="border-radius:16px; background: rgba(255,255,255,0.6); padding: 14px;">
                </div>
            </div>
        </section>
        
        

        
        
        
        
        <section class="about-section">
            <div class="container">
                <div class="about-grid">
                    <div class="about-card">
                        <h2 style="margin-bottom:16px;">Who We Are</h2>
                        <p style="font-size:1.1rem; line-height:1.8; color:var(--deep-indigo);">
                            We are a student-led organization committed to breaking down social isolation among teens and building a collaborative community. In a world where silence can feel heavy, we believe no one should go through their journey alone.
                        </p>
                        <p style="font-size:1.1rem; line-height:1.8; color:var(--deep-indigo);">
                            Our movement creates a bridge between solitude and belongingness. Teens can express themselves through sharing anonymous letters or messages and receive genuine, heartfelt responses from peers who care. We also share resources, insights, and guidance by holding in-person events, ensuring that support is always within reach.
                        </p>
                        <p style="font-size:1.1rem; line-height:1.8; color:var(--deep-indigo);">
                            We don’t just listen — we inspire, uplift, and help embrace new paths toward healing and resilience. Because every voice deserves to be echoed.
                        </p>
                        <p style="opacity:0.85; margin-top:10px;">Our values: Empathy • Connection • Hope • Outreach • Empowerment.</p>
                    </div>
                    <div style="text-align:center;">
                        <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="E.C.H.O.E" style="max-width:320px; width:100%; border-radius:16px; background: rgba(255,255,255,0.6); padding:14px; box-shadow:0 10px 30px rgba(42,61,102,0.12);">
                    </div>
                </div>
            </div>
        </section>
        
        <section class="consultant-section">
            <div class="container">
                <h2 style="text-align:center; margin-bottom:28px;">Our Mental Health Consultant</h2>
                <div class="consultant-card">
                    <div class="avatar">MH</div>
                    <div>
                        <h3 style="margin:0 0 8px;">Name: <span style="font-weight:800;">TBD</span></h3>
                        <p style="margin:0 0 6px 0; line-height:1.7;">Description: A qualified mental health professional who advises our content and safeguards supportive tone.</p>
                        <p style="margin:0; line-height:1.7; opacity:.85;">Approach: ACT/CBT, mindfulness, and strengths-based care.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="container">
                <div class="about-card" style="max-width:900px; margin:0 auto;">
                    <h2 style="margin-bottom:12px;">Collaborators</h2>
                    <p style="margin:0 0 8px 0;">NPOs, charities, and partners we work with to extend support and outreach.</p>
                    <ul style="margin:6px 0 0 18px; line-height:1.8;">
                        <li>Coming soon — partner highlights</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section class="social-manual">
            <div class="container">
                <h2 style="margin-bottom:18px;">From Our Community</h2>
                
                <div class="post-grid">
                    <div class="post-card">
                        <noscript>
                            {% if latest_ig %}
                            <a href="{{ latest_ig.permalink }}" target="_blank" rel="noopener" style="display:block">
                                <img src="{{ latest_ig.thumb }}" alt="Instagram post" style="width:100%; border-radius:8px;" />
                            </a>
                            {% else %}
                            <a href="https://www.instagram.com/echoe_hosa26" target="_blank" rel="noopener" style="display:block">
                                <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="Instagram" style="width:100%; border-radius:8px;" />
                            </a>
                            {% endif %}
                        </noscript>
                        {% if latest_ig and latest_ig.permalink %}
                        <blockquote class="instagram-media" data-instgrm-permalink="{{ latest_ig.permalink }}" data-instgrm-captioned data-instgrm-version="14" style="background:#fff; border:0; margin:0 auto; max-width:540px; min-width:326px; width:100%;"></blockquote>
                        {% else %}
                        <div style="padding:12px; text-align:center; opacity:.8;">Latest Instagram post unavailable.</div>
                        {% endif %}
                        <script async src="https://www.instagram.com/embed.js"></script>
                    </div>
                    <div class="post-card" id="igGalleryCard">
                        <div id="igGalleryScroll">
                            <div id="igGallery" class="ig-gallery" style="align-items:start; min-height:110px;">
                                <!-- populated by /api/instagram-feed -->
                            </div>
                        </div>
                        <script>
                        document.addEventListener('DOMContentLoaded', async function(){
                          try{
                            const r = await fetch('/api/instagram-feed', {cache:'no-store'});
                            const data = await r.json();
                            let items = (data && Array.isArray(data.items)) ? data.items : [];
                            // Deduplicate by permalink
                            const seen = new Set();
                            items = items.filter(it=>{ if(!it || !it.permalink || seen.has(it.permalink)) return false; seen.add(it.permalink); return true; });
                            const g = document.getElementById('igGallery');
                            if(!g) return;
                            g.innerHTML = '';
                            if(items.length === 0){
                              g.innerHTML = '<div style="grid-column:1/-1;opacity:.7;text-align:center;">No posts found.</div>';
                              return;
                            }
                            items.forEach(it=>{
                              const a = document.createElement('a');
                              a.href = it.permalink;
                              a.target = '_blank';
                              a.rel = 'noopener';
                              a.className = 'ig-item';
                              const img = document.createElement('img');
                              img.src = it.thumb || it.url;
                              img.alt = (it.caption||'Instagram');
                              img.loading='lazy';
                              a.appendChild(img);
                              g.appendChild(a);
                            });
                            // ensure the scroll container starts from the top after render
                            const scroller = document.getElementById('igGalleryScroll');
                            if (scroller) scroller.scrollTop = 0;
                          }catch(e){console.log('ig gallery error',e)}
                        });
                        </script>
                    </div>
                </div>
            </div>
        </section>



<script>
// Include the chat widget
document.addEventListener('DOMContentLoaded', function() {
    // Chat widget will be loaded from the base template
});
</script>
{% endblock %} 