name = "light-in-silence"
compatibility_date = "2024-01-15"
main = "dist/index.js"
account_id = "a0a25954e31bac6ca5ccad3ad5d1b529"

# Serve static assets from the local ./public directory via Workers Assets
assets = { directory = "./public", binding = "ASSETS" }

[env.production]
name = "light-in-silence"
# routes intentionally managed in Dashboard; keep empty to avoid accidental re-attach
routes = []

# Ensure production has its own bindings and vars
[env.production.vars]
ENVIRONMENT = "production"
PROXY_ORIGIN = "https://light-in-silence-flask.onrender.com"
# Set this to your hosted Flask origin (e.g., Render URL) to proxy without content changes
# PROXY_ORIGIN = "https://your-flask-origin.onrender.com"

[[env.production.d1_databases]]
binding = "DB"
database_name = "light-in-silence-db"
database_id = "f85dc072-ff8a-4842-9faf-63eb241a4a13"

[env.production.assets]
directory = "./public"
binding = "ASSETS"

[env.staging]
name = "light-in-silence-staging"

[[d1_databases]]
binding = "DB"
database_name = "light-in-silence-db"
database_id = "f85dc072-ff8a-4842-9faf-63eb241a4a13"

[vars]
ENVIRONMENT = "production"

[build]
command = "npm run build"

[dev]
port = 8787
host = "localhost" 